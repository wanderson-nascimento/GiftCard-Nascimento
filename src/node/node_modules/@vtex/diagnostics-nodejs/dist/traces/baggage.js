"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addBaggageToContext = addBaggageToContext;
exports.addBaggageItemsToContext = addBaggageItemsToContext;
exports.getBaggageFromContext = getBaggageFromContext;
exports.getAllBaggageFromContext = getAllBaggageFromContext;
const common_1 = require("../types/common");
function addBaggageToContext(ctx, key, value) {
    const baggage = common_1.propagation.getBaggage(ctx) || common_1.propagation.createBaggage();
    const updatedBaggage = baggage.setEntry(key, { value });
    return common_1.propagation.setBaggage(ctx, updatedBaggage);
}
function addBaggageItemsToContext(ctx, items) {
    let baggage = common_1.propagation.getBaggage(ctx) || common_1.propagation.createBaggage();
    for (const [key, value] of Object.entries(items)) {
        baggage = baggage.setEntry(key, { value });
    }
    return common_1.propagation.setBaggage(ctx, baggage);
}
function getBaggageFromContext(ctx, key) {
    const baggage = common_1.propagation.getBaggage(ctx);
    if (!baggage)
        return undefined;
    const entry = baggage.getEntry(key);
    return entry?.value;
}
function getAllBaggageFromContext(ctx) {
    const baggage = common_1.propagation.getBaggage(ctx);
    if (!baggage)
        return {};
    const result = {};
    baggage.getAllEntries().forEach(([key, entry]) => {
        result[key] = entry.value;
    });
    return result;
}
//# sourceMappingURL=baggage.js.map